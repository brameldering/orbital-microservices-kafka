apiVersion: apps/v1
kind: Deployment
metadata:
  name: kafka-manager-depl
spec:
  replicas: 1
  selector:
    matchLabels:
      app: kafka-manager
  template:
    metadata:
      labels:
        app: kafka-manager
    spec:
      containers:
        - name: kafka-manager
          image: solsson/kafka-manager@sha256:9da595ecbb733074a1d3c6091a1e0c384da4f4e1f19f4e16276062278da8e592
          ports:
            - containerPort: 80
          env:
            - name: ZK_HOSTS
              value: zookeeper:2181
              # value: zookeeper.kafka:2181
              # value: localhost:32181
          command:
            - ./bin/kafka-manager
            - -Dhttp.port=80
---
kind: Service
apiVersion: v1
metadata:
  name: kafka-manager
spec:
  selector:
    app: kafka-manager
  ports:
    - protocol: TCP
      port: 80
      targetPort: 80
# apiVersion: v1
# kind: Service
# metadata:
#   name: kafka-manager
# spec:
#   type: NodePort
#   selector:
#     app: kafka-manager # Label selector for your Kafka pods
#   ports:
#     - name: kafka-manager
#       port: 80 # Port exposed by Kafka inside the cluster
#       targetPort: 80 # Port on which Kafka is listening inside the pods
#       nodePort: 30080 # Choose a port (within the NodePort range) to expose Kafka externally
